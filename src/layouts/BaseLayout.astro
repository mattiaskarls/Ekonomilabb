---
import "../styles/global.css";
import TopNav from "../components/TopNav.astro";

const {
  title,
  description,
  canonical,
  ogImage,
  lang = "sv",
  noindex = false,
} = Astro.props;

const siteName = "Ekonomismedjan";
const siteUrl = Astro.site ?? "";

const pageTitle =
  typeof title === "string" && title.trim().length > 0
    ? `${title} – ${siteName}`
    : siteName;

const pageDescription =
  typeof description === "string" && description.trim().length > 0
    ? description
    : "Kunskap, verktyg och struktur för ekonomi som håller i längden.";

const canonicalUrl =
  typeof canonical === "string" && canonical.length > 0
    ? canonical
    : siteUrl + Astro.url.pathname;

const ogImageUrl =
  typeof ogImage === "string" && ogImage.length > 0
    ? ogImage
    : undefined;
---

<!doctype html>
<html lang={lang}>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>{pageTitle}</title>
    <meta name="description" content={pageDescription} />

    {noindex ? <meta name="robots" content="noindex, nofollow" /> : null}

    <link rel="canonical" href={canonicalUrl} />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content={siteName} />
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={pageDescription} />
    <meta property="og:url" content={canonicalUrl} />
    {ogImageUrl ? <meta property="og:image" content={ogImageUrl} /> : null}

    <!-- Twitter -->
    <meta name="twitter:card" content={ogImageUrl ? "summary_large_image" : "summary"} />
    <meta name="twitter:title" content={pageTitle} />
    <meta name="twitter:description" content={pageDescription} />
    {ogImageUrl ? <meta name="twitter:image" content={ogImageUrl} /> : null}

    <meta name="theme-color" content="#0b0c0f" />

    <slot name="head" />
  </head>

  <body class="min-h-screen flex flex-col bg-[var(--bg)] text-[var(--text)] antialiased">
    <a href="#main" class="sr-only focus:not-sr-only">Hoppa till innehåll</a>

    <TopNav />

    <main id="main" class="flex-1">
      <div class="w-full max-w-6xl mx-auto px-4 md:px-6 py-10">
        <slot />
      </div>
    </main>

<script defer src="/js/glossary.js"></script>

  </body>
</html>
